<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8" />
    <title>Vozes da Pirâmide</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="style.css" />
</head>
<body data-theme="dark">
    <div class="page-wrapper">
        <!-- TOPO -->
        <header class="top-bar">
            <div class="logo-area">
                <h1 class="app-title">Vozes da pirâmide</h1>
                <div class="status-indicator">
                    <span id="status-dot" class="status-dot offline"></span>
                    <span id="status-text">Carregando...</span>
                </div>
            </div>

            <div class="top-actions">
                <button id="theme-toggle" class="icon-btn theme-toggle" aria-label="Alternar tema">
                    ☾
                </button>
            </div>
        </header>

        <!-- ÁREA PRINCIPAL -->
        <main class="main-layout">
            <!-- COMPOSER -->
            <section class="card composer-card">
                <div class="card-header">
                    <h2>Publique sua indignação, anonimamente.</h2>
                </div>

                <div class="composer-body">
                    <textarea
                        id="post-text"
                        class="composer-textarea"
                        rows="3"
                        maxlength="800"
                        placeholder="Conte o que acontece aí dentro (sem citar nomes reais ou dados que possam te identificar)..."
                    ></textarea>
                </div>

                <div class="composer-footer">
                    <!-- Mantido só para compatibilidade com o JS -->
                    <button id="btn-escolher-classe" class="ghost-btn" type="button" style="display:none">
                        Escolher posição na pirâmide
                    </button>

                    <span id="post-error" class="error-text"></span>

                    <button id="btn-postar" class="primary-btn">
                        Postar anonimamente
                    </button>
                </div>
            </section>

            <!-- FEED -->
            <section class="card feed-card">
                <div class="feed-header">
                    <h2>Feed de indignações</h2>
                    <button class="secondary-btn" type="button" onclick="carregarPosts()">
                        Atualizar
                    </button>
                </div>

                <div id="feed" class="feed-list">
                    <!-- preenchido via JS -->
                </div>
            </section>
        </main>
    </div>

    <!-- BOTÃO DE AJUDA -->
    <button class="floating-help" title="Como funciona?">
        ?
    </button>

    <!-- MODAL DA PIRÂMIDE -->
    <div id="class-modal-backdrop" class="modal-backdrop">
        <div class="modal">
            <button id="modal-close" class="modal-close" aria-label="Fechar">&times;</button>

            <h3>Escolha sua posição na pirâmide</h3>
            <p class="modal-subtitle">
                Clique em um dos blocos para dizer de onde vem sua indignação.
            </p>

            <!-- PIRÂMIDE -->
            <div class="pyramid-wrapper">
                <svg id="pyramid-svg" viewBox="0 0 200 180" class="pyramid-svg">
                    <defs>
                        <linearGradient id="gradBase" x1="0%" y1="0%" x2="100%" y2="100%">
                            <stop offset="0%" stop-color="#23274b" />
                            <stop offset="100%" stop-color="#15172c" />
                        </linearGradient>
                        <linearGradient id="gradMiddle" x1="0%" y1="0%" x2="100%" y2="100%">
                            <stop offset="0%" stop-color="#4248a8" />
                            <stop offset="100%" stop-color="#262a6b" />
                        </linearGradient>
                        <linearGradient id="gradTop" x1="0%" y1="0%" x2="100%" y2="100%">
                            <stop offset="0%" stop-color="#8f7bff" />
                            <stop offset="100%" stop-color="#4c45ff" />
                        </linearGradient>
                    </defs>

                    <!-- BASE -->
                    <polygon
                        data-classe="base"
                        class="pyramid-block base-block"
                        fill="url(#gradBase)"
                        points="20,140 180,140 150,170 50,170"
                    ></polygon>

                    <!-- MEIO -->
                    <polygon
                        data-classe="meio"
                        class="pyramid-block middle-block"
                        fill="url(#gradMiddle)"
                        points="40,105 160,105 140,140 60,140"
                    ></polygon>

                    <!-- TOPO -->
                    <polygon
                        data-classe="topo"
                        class="pyramid-block top-block"
                        fill="url(#gradTop)"
                        points="70,60 130,60 115,105 85,105"
                    ></polygon>
                </svg>

                <div class="pyramid-legend">
                    <span class="legend-dot base"></span> Chão de fábrica
                    <span class="legend-dot middle"></span> Coordenação
                    <span class="legend-dot top"></span> Diretoria
                </div>
            </div>

            <p class="modal-tip">
                A peça selecionada vai colorir o seu avatar no feed.
            </p>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
